<!DOCTYPE html>
<html>
  <head>
    <link href="../css/materialdesignicons.min.css" rel="stylesheet" />
    <link href="../css/vuetify.min.css" rel="stylesheet" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui" />
    <style>
      [v-cloak] {
        display: none;
      }
    </style>
  </head>

  <body>
    <div id="app" v-cloak>
      <v-app>
        <v-app-bar app color="blue" dark dense>
          <v-icon @click="backtohome">mdi-home</v-icon>
          <v-row align="center">
            <v-col :cols="12">
              <div style="text-align: center">
                <v-toolbar-title>半月追求</v-toolbar-title>
              </div>
            </v-col>
          </v-row>
        </v-app-bar>
        <v-main>
          <br />
          <div style="text-align: center; margin-bottom: 10px">
            <v-card class="d-flex align-content-center flex-wrap justify-center" flat tile min-height="10">
              <v-btn color="primary" elevation="5" rounded @click="jump(-2)">
                <div class="bt_text">往前两周</div>
              </v-btn>
              <span></span>
              <v-btn disabled elevation="5" rounded>
                <div class="dis_bt_text">第 {{ws}} 半月</div>
              </v-btn>
              <span></span>
              <v-btn color="primary" elevation="5" rounded @click="jump(2)">
                <div class="bt_text">往后两周</div>
              </v-btn>
            </v-card>
          </div>
          <v-divider></v-divider>
          <br />
          <div style="text-align: center">
            <v-card class="d-flex align-content-center flex-wrap justify-center" flat tile min-height="100">
              <v-btn color="primary" elevation="5" rounded large @click="cat('p')">
                <div class="bt_text">初级</div>
              </v-btn>
              <span></span>
              <v-btn color="primary" elevation="5" rounded large @click="cat('j')">
                <div class="bt_text">中级</div>
              </v-btn>
              <span></span>
              <v-btn color="primary" elevation="5" rounded large @click="cat('h')">
                <div class="bt_text">高级</div>
              </v-btn>
            </v-card>
          </div>          
			</v-card>
<div style="text-align: center">
		       <p>使用说明</p>
		 <p>初级建议幼儿园阶段使用</p>
		<p>中级建议一到三年级使用</p>
		<p>高级建议四到六年级使用
			     </p>
				</div>
			</div>
          <div v-if="date_error" class="contents"><v-alert shaped prominent type="error">日期超出信息范围</v-alert></div>
        </v-main>
      </v-app>
    </div>
    <script src="../js/vue.js"></script>
    <script src="../js/vuetify.js"></script>
    <script>
      new Vue({
        el: "#app",
        vuetify: new Vuetify(),
        data: () => ({
          w: 0,
          url: "",
          c: "",
          ws: "",
        }),
        methods: {
          cat(c) {
            this.c = c;
          },
          backtohome() {
            window.location.href = "weekly.html";
          },
          differWeek() {
            const oneDay = 24 * 60 * 60 * 1000;
            const today = new Date();
            const startDate = new Date("2023-4-30");
            const diffDays = Math.round(Math.abs((today - startDate) / oneDay));
            const dayOfWeek = today.getDay();
            let daysUntilFirstDayOfWeek = (7 + dayOfWeek) % 7;
            if (daysUntilFirstDayOfWeek === 0) {
              daysUntilFirstDayOfWeek = 7;
            }
            const daysAfterLastWeek = (diffDays - daysUntilFirstDayOfWeek) % 7;
            const weeksBetweenDates = Math.floor((diffDays - daysUntilFirstDayOfWeek) / 7);
            if (daysAfterLastWeek >= 0) {
              return weeksBetweenDates + 1;
            }
            return weeksBetweenDates;
          },
          jump(step) {
            if (step == -2 && this.ws != 1) this.w -= 2;
            else if (step == 2) this.w += 2;
          },
        },
        watch: {
          c: function (v) {
            let msg = this.ws;
            if (v == "h") {
              msg = msg % 136;
              if (msg == 0) msg = 136;
            } else if (v == "j") {
              msg = msg % 125;
              if (msg == 0) msg = 125;
            } else if (v == "p") {
              msg = msg % 80;
              if (msg == 0) msg = 80;
            }
            window.location.href = `./${v}/${msg}.html`;
          },
          w: function (v) {
            this.ws = Math.floor(v / 2);
            if (this.ws < 1) this.ws = 1;
            else if (this.ws >= 1 && v % 2 != 0) this.ws += 1;
          },
        },
        mounted() {
          this.w = this.differWeek();
        },
      });
    </script>
    <style>
      span {
        margin: 5px;
      }
      .demo {
        text-align: center;
      }
      .v-btn {
        margin: 1px;
      }

      b {
        color: tomato;
      }

      .bt_text {
        font-size: 1.2em;
        font-weight: bold;
      }
    </style>
  </body>
</html>
